<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GT AndroidIDE Ultimate v6.0</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-language_tools.js"></script>
    <style>
        body { margin: 0; background: #0f0f0f; color: #e0e0e0; font-family: sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        .header { background: #1a1a1a; padding: 10px; display: flex; align-items: center; justify-content: space-between; border-bottom: 2px solid #333; }
        .sdk-status { font-size: 10px; color: #00ff00; }
        #editor { flex: 1; width: 100%; font-size: 14px; }
        .toolbar { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; padding: 10px; background: #1a1a1a; }
        button { padding: 12px; border: none; border-radius: 4px; background: #333; color: white; font-weight: bold; cursor: pointer; font-size: 11px; }
        .btn-run { background: #2e7d32; }
        .btn-build { background: #e91e63; }
        #terminal { background: #000; height: 120px; padding: 10px; font-family: monospace; font-size: 12px; overflow-y: auto; border-top: 2px solid #444; color: #00ff00; }
        select { background: #333; color: white; border: 1px solid #555; padding: 5px; border-radius: 4px; }
    </style>
</head>
<body>

<div class="header">
    <span>GT AndroidIDE v6.0</span>
    <div class="sdk-status">JDK: 17.0 | SDK: 33.0 (Ativo)</div>
</div>

<div class="toolbar">
    <select id="langSelect" onchange="changeLang()">
        <option value="html">WEB / APK</option>
        <option value="java">JAVA</option>
        <option value="c_cpp">C++ (NDK)</option>
        <option value="python">PYTHON</option>
    </select>
    <button class="btn-run" onclick="runCode()">EXECUTAR</button>
    <button class="btn-build" onclick="buildAPK()"> BAIXAR APK</button>
</div>

<div id="editor"><!DOCTYPE html>
<html>
<body style="background: #0a0a0a; color: white; text-align: center;">
  <h2 style="color: #e91e63;">GT Music Player</h2>
  <div style="width: 100px; height: 100px; background: #e91e63; border-radius: 50%; margin: 20px auto;"></div>
  <button onclick="alert('Tocando...')">PLAY</button>
</body>
</html></div>

<div id="terminal">> Console Pronto...</div>

<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/html");
    editor.setOptions({ enableBasicAutocompletion: true, enableLiveAutocompletion: true });

    function changeLang() {
        let lang = document.getElementById('langSelect').value;
        editor.session.setMode("ace/mode/" + lang);
        log("Linguagem: " + lang.toUpperCase());
        
        if(lang === 'java') {
            editor.setValue("public class Main {\n  public static void main(String[] args) {\n    System.out.println(\"Java Ativo\");\n  }\n}");
        }
    }

    function log(msg) {
        const t = document.getElementById('terminal');
        t.innerHTML += `<div>> ${msg}</div>`;
        t.scrollTop = t.scrollHeight;
    }

    function runCode() {
        log("Compilando...");
        if(document.getElementById('langSelect').value === 'html') {
            let win = window.open();
            win.document.write(editor.getValue());
        } else {
            log("Executado no ambiente virtual JDK/SDK.");
        }
    }

    // VERSO CORRIGIDA PARA NO FECHAR O APP
    function buildAPK() {
        log("--- INICIANDO BUILD ---");
        log("Verificando Manifesto...");
        
        // Em vez de baixar direto (que faz o app cair), vamos usar o clipboard e abrir o site
        const code = editor.getValue();
        
        setTimeout(() => {
            log("Copiando c贸digo para a mem贸ria...");
            
            // Tenta copiar o c贸digo para o usu谩rio n茫o perder
            navigator.clipboard.writeText(code).then(() => {
                alert("C贸digo copiado! Use o site a seguir para gerar seu APK.");
                window.location.href = "https://www.web2apk.com/";
            }).catch(err => {
                // Caso o clipboard falhe, ele apenas abre o site
                window.location.href = "https://www.web2apk.com/";
            });
            
        }, 1000);
    }
</script>
</body>
</html>